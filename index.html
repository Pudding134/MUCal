<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MUCal</title>
    <link rel="stylesheet" href="/assets/style.css">
</head>
<body>

    <div class="header">
      <nav>
        <div class="logo">
          <img src="Murdoch_logo(250x250).jpeg" alt="Murdoch_logo">
        </div>
        <div class="details">
            
        </div>
        <ul>
          <li><a href="#">Murdoch Home</a></li>
          <li><a href="#">About</a></li>
        </ul>
      </nav>
    </div>
    <div class="btn-holder">
        <button class="theme" onclick="switchTheme()"> Switch Theme</button>
    </div>

    <div class="container">
        <div id='calendar'></div>
        <div class="expanded-view">
            <h1 class="event-heading"></h1>
            <p class="event-description"></p>
            <p class="event-start"></p>
            <p class="event-end"></p>
          </div>
        </div>
        
      </body>
      <script>
        
      </script>
<script src="/assets/fc.js"></script>
<script src="/assets/moment.js"></script>
<script src="/assets/moment-timezone.js"></script>
<script>
  
  function switchTheme()
  {
    document.body.classList.toggle('dark-theme');
    
  }
  
    document.addEventListener('DOMContentLoaded', function() {
      var initialTimeZone = 'UTC';
      var timeZoneSelectorEl = document.getElementById('time-zone-selector');
      var loadingEl = document.getElementById('loading');
      var calendarEl = document.getElementById('calendar');
      
      

      var calendar = new FullCalendar.Calendar(calendarEl, {
            timeZone: initialTimeZone,
            initialView: 'dayGridMonth', //multiMonthYear
            editable: false,
            events:[
            {
                id: 'AU-ev1',
                title: 'Australia Graduation',
                start: '2023-05-17',
                color  : '#65688f',
                extendedProps:{
                    country: 'Australia'
                },
                description: 'Australian Students Graduate Today!'
            },
            {
                id: 'AU-ev2',
                title: 'Australia Graduation Ceremony',
                start: '2023-05-17 1800',
                color  : '#65688f',
                extendedProps:{
                    country: 'Australia'
                },
                description: 'Australian Students Graduate Today!'
            },
            {
                id: 'SG-ev2',
                title: 'Singapore Graduation',
                start: '2023-05-19 0200',
                end: '2023-05-19 1000',
                color  : '#3CB371',
                extendedProps:{
                    country: 'Singapore'
                },
                description: 'Singapore Students Graduate Today!'
            },            
            {
                id: 'DB-ev2',
                title: 'DuBai Graduation',
                start: '2023-05-20 1800',
                end: '2023-05-20 2200',
                color  : '#b56107',
                extendedProps:{
                    country: 'Dubai'
                },
                description: 'Dubai Students Graduate Today!'
            }
            ],
            eventClick: function(info) {

                let startDate = moment(info.event.start);
                let formattedStartDate = startDate.format('DD-MM-YYYY HHmm');
                let startHour = startDate.format('HH');

                let endDate = moment(info.event.end);
                let formattedEndDate = endDate.format('DD-MM-YYYY HHmm');


                document.querySelector(".event-heading").innerHTML = info.event.title;
                if(formattedEndDate === 'Invalid date' && startHour !== '00')
                {
                  document.querySelector(".event-start").innerHTML = formattedStartDate;
                  document.querySelector(".event-end").innerHTML = 'End of Day';
                }
                else if (formattedEndDate === 'Invalid date' && startHour === '00')
                {
                  document.querySelector(".event-start").innerHTML = 'Full day Event';
                }
                else
                {
                  document.querySelector(".event-start").innerHTML = formattedStartDate;
                  document.querySelector(".event-end").innerHTML = formattedEndDate;
                }
                document.querySelector(".event-description").innerHTML = info.event.extendedProps.description;
                
                
            }
            
    });

    calendar.render();
    calendar.setOption('timeZone', 'local');

    let zone_name =  moment.tz.guess();
      console.log(zone_name);
      let timezone = moment.tz(zone_name).zoneAbbr();
      
      
      document.querySelector('.details').innerHTML = zone_name + ' GMT(' + timezone + ')';
    });
</script>
</html>